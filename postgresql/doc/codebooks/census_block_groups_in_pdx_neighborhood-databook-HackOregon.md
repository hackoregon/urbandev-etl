# [Hack Oregon](http://www.hackoregon.org/) - Urban Development project
# Data Book for Table: census\_block\_groups\_in\_pdx\_neighborhood

**Table of Contents**

1. <a href="#datasource">Data Source</a><br>
2. <a href="#fields">Field Definitions</a><br>
3. <a href="#loading">Loading</a><br>

## <a name="datasource">1. Data Source</a>
This data was generated by the Urban Development project. A Python program compared shape files for Portland neighborhoods with shape files for U.S. Census Block Groups used for the 2010 Decennial Census. The program calculated the percentage of the Block Group area that overlapped the Portland neighborhood area. That amount of overlap is used when trying to correlate census data with a Portland neighborhood.

## <a name="fields">2. Field Definitions</a>
NEIGHBORHOOD_ID integer : foreign key to a Portland Neighborhood.

GISJOIN varchar : foreign key to a Block Group entity. This key is used in census data tables obtained from NHGIS.org.

BLKGRP_YEAR integer : year that this Block Group was defined by the Census Bureau.

PERCENT_INSIDE numeric(7, 3) : percentage of the Block Group that lies within the Neighborhood.

DATA_SOURCE_ID integer : Foreign key to data_source.

DATE_LOADED timestamp WITH TIME ZONE DEFAULT now() : when this row was loaded.

PRIMARY KEY (NEIGHBORHOOD_ID, GISJOIN, BLKGRP_YEAR)

### Sample query
Displays all of the Block Groups overlapping a neighborhood whose name starts with "Northwest" in which at least 25% of the Block Group is contained within the neighborhood area:

<pre><code>select bg.gisjoin, n.id, bg.percent_inside, n.name 
from census_block_groups_in_pdx_neighborhood bg 
  inner join pdx_neighborhood n 
    on bg.neighborhood_id = n.id 
where n.in_portland = true 
  and n.name like 'Northwest%' 
  and bg.percent_inside > 25.0 
order by n.name, bg.gisjoin;</code></pre>

## <a name="loading">3. Loading</a>
We used [pgloader](http://pgloader.io/) to load the CSV file into a PostgreSQL database. The scripts, data, and instructions are located here: [https://github.com/hackoregon/urbandev-etl/tree/master/postgresql/scripts/data-loaders](https://github.com/hackoregon/urbandev-etl/tree/master/postgresql/scripts/data-loaders)
